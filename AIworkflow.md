# AI Agent 協作工作流程指南 (AIworkflow.md)

本文檔旨在定義「雲端 Agent」與「本地 Agent (Cline)」之間的標準化協作流程，以確保專案開發的高效性、準確性和可追溯性。

## 角色定義

1.  **雲端 Agent (您):**
    *   **角色:** 架構師 / 核心開發者。
    *   **核心職責:** 負責思考與設計，產出高品質、純文字的程式碼內容。
    *   **主要產出:**
        *   完整的程式碼檔案 (例如 `.js`, `.tsx`, `.json` 的內容)。
        *   Firebase 安全規則 (`.rules`) 的內容。
        *   Cloud Functions 的業務邏輯程式碼。
        *   **[關鍵]** 每次交付程式碼時，必須附帶一份清晰的「依賴套件清單」。

2.  **本地 Agent (Cline):**
    *   **角色:** 執行工程師 / 部署管理員。
    *   **核心職責:** 負責所有與本地開發環境的互動，將雲端 Agent 的智慧產出變為現實。
    *   **主要產出:**
        *   一個功能正常的本地專案結構。
        *   成功安裝所有必要的依賴套件。
        *   一個可供測試的、正在運行的應用程式。
        *   成功將設定檔或後端程式碼部署到 Firebase 雲端。

## 標準迭代開發流程 (Feature Development Cycle)

每一個新功能或任務的開發，都應遵循以下「四步循環」流程：

---

### **第一步：環境準備 (由 本地 Agent 處理)**

*   **執行者:** 本地 Agent (Cline)
*   **任務:**
    1.  **初始化專案:** 根據 `agent.md` 的規劃，執行所有必要的初始化指令。
        *   *範例:* `expo init MyProject`、`firebase init firestore`。
    2.  **建立檔案骨架:** 建立空的檔案或資料夾結構，為雲端 Agent 準備好寫入程式碼的「容器」。
        *   *範例:* `touch src/screens/LoginScreen.js`。
*   **產出:** 一個準備就緒、等待填充程式碼的本地專案環境。

---

### **第二步：程式碼生成 (由 雲端 Agent 處理)**

*   **執行者:** 雲端 Agent (您)
*   **任務:**
    1.  **撰寫程式碼:** 針對當前功能，生成所有必要的程式碼檔案內容。
    2.  **提供依賴清單:** 明確列出該功能所需的所有 npm 套件。
        *   *範例交付內容:*
            ```
            **檔案: src/screens/LoginScreen.js**
            (此處為完整的 React Native 程式碼...)

            **依賴套件:**
            - `firebase`
            - `@react-navigation/native`
            ```
*   **產出:** 一段或多段純文字的程式碼，以及一份依賴套件列表。

---

### **第三步：執行與實現 (由 本地 Agent 處理)**

*   **執行者:** 本地 Agent (Cline)
*   **任務:**
    1.  **寫入檔案:** 將雲端 Agent 提供的程式碼內容，準確無誤地寫入到本地對應的檔案中。
        *   *範例:* 使用 `write_to_file` 或 `replace_in_file` 工具。
    2.  **安裝依賴:** 根據雲端 Agent 提供的清單，執行 `npm install` 或 `expo install` 指令來下載所有插件。
    3.  **執行與部署:**
        *   對於前端任務，執行 `expo start` 來啟動應用程式。
        *   對於後端任務，執行 `firebase deploy` 來部署規則或 Cloud Functions。
*   **產出:** 功能在本地成功運行，或配置已成功部署到雲端。

---

### **第四步：測試與驗證 (由 雙方共同處理)**

*   **執行者:** 本地 Agent (Cline) 發起，雲端 Agent (您) 確認。
*   **任務:**
    1.  **本地 Agent (Cline):** 報告執行結果。如果啟動 App，則提供截圖；如果部署，則提供部署成功的日誌。
    2.  **雲端 Agent (您):** 檢視執行結果，確認功能是否符合預期。
*   **產出:** 對當前功能開發完成的確認。

---

完成第四步後，我們將根據 `agent.md` 的規劃，開始下一個功能的「四步循環」流程，直到整個里程碑完成。
